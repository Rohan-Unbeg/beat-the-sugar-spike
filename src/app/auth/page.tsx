"use client";\n\nimport React, { useState, useCallback } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Mail, Lock, UserPlus, LogIn } from 'lucide-react';\n\n// Assuming these components exist in src/components/ui and src/lib\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Button } from '@/components/ui/button';\nimport { cn } from '@/lib/utils'; // Utility for combining Tailwind classes\nimport { signInUser, signUpUser } from '@/lib/auth'; // Integration with auth utilities\n\ntype AuthTab = 'signIn' | 'signUp';\n\nconst AuthPage = () => {\n  const router = useRouter();\n  const [activeTab, setActiveTab] = useState<AuthTab>('signIn');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [successMessage, setSuccessMessage] = useState<string | null>(null);\n\n  const handleAuth = useCallback(async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError(null);\n    setSuccessMessage(null);\n\n    try {\n      let result;\n      if (activeTab === 'signIn') {\n        result = await signInUser(email, password);\n      } else { // signUp\n        if (password !== confirmPassword) {\n          setError('Passwords do not match.');\n          return;\n        }\n        result = await signUpUser(email, password);\n      }\n\n      if (result.success) {\n        if (activeTab === 'signIn') {\n          router.push('/dashboard'); // Redirect to dashboard on successful sign-in\n        } else {\n          // On successful sign-up, show success and switch to sign-in tab\n          setSuccessMessage(result.message || 'Account created successfully! Please sign in.');\n          setActiveTab('signIn');\n          setEmail('');\n          setPassword('');\n          setConfirmPassword('');\n        }\n      } else {\n        setError(result.message || `Failed to ${activeTab === 'signIn' ? 'sign in' : 'sign up'}. Please try again.`);\n      }\n    } catch (err) {\n      console.error('Authentication error:', err);\n      setError('An unexpected error occurred. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [activeTab, email, password, confirmPassword, router]);\n\n  const buttonVariants = {\n    active: {\n      scale: 1.05,\n      backgroundColor: 'hsl(var(--primary))',\n      color: 'hsl(var(--primary-foreground))',\n      transition: { type: 'spring', stiffness: 300, damping: 20 },\n    },\n    inactive: {\n      scale: 1,\n      backgroundColor: 'hsl(var(--secondary))',\n      color: 'hsl(var(--secondary-foreground))',\n      transition: { type: 'spring', stiffness: 300, damping: 20 },\n    }\n  };\n\n  const formVariants = {\n    hidden: { opacity: 0, y: 20, pointerEvents: 'none' as const },\n    visible: { opacity: 1, y: 0, pointerEvents: 'auto' as const },\n    exit: { opacity: 0, y: -20, pointerEvents: 'none' as const }\n  };\n\n  return (\n    <div className="flex min-h-screen items-center justify-center bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-700 p-4">\n      <Card className="w-full max-w-md shadow-2xl rounded-xl overflow-hidden backdrop-blur-md bg-white/80 dark:bg-gray-900/80 border-none">\n        <CardHeader className="p-6 pb-4 border-b border-gray-200 dark:border-gray-700">\n          <CardTitle className="text-3xl font-extrabold tracking-tight text-center text-gray-900 dark:text-white">\n            Welcome!\n          </CardTitle>\n          <CardDescription className="text-center text-gray-600 dark:text-gray-400 mt-2">\n            {activeTab === 'signIn' ? 'Sign in to your account to continue.' : 'Create a new account to get started.'}\n          </CardDescription>\n        </CardHeader>\n\n        <div className="grid grid-cols-2 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700">\n          <motion.button\n            type="button"\n            onClick={() => setActiveTab('signIn')}\n            className={cn(\n              "p-3 text-lg font-semibold transition-all duration-300 relative focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary",\n              activeTab === 'signIn' ? "text-primary dark:text-primary-foreground" : "text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"\n            )}\n            initial={false}\n            animate={activeTab === 'signIn' ? "active" : "inactive"}\n            variants={buttonVariants}\n          >\n            Sign In\n            {activeTab === 'signIn' && (\n              <motion.div\n                layoutId="underline"\n                className="absolute bottom-0 left-0 right-0 h-1 bg-primary rounded-t-lg"\n              />\n            )}\n          </motion.button>\n          <motion.button\n            type="button"\n            onClick={() => setActiveTab('signUp')}\n            className={cn(\n              "p-3 text-lg font-semibold transition-all duration-300 relative focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary",\n              activeTab === 'signUp' ? "text-primary dark:text-primary-foreground" : "text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"\n            )}\n            initial={false}\n            animate={activeTab === 'signUp' ? "active" : "inactive"}\n            variants={buttonVariants}\n          >\n            Sign Up\n            {activeTab === 'signUp' && (\n              <motion.div\n                layoutId="underline"\n                className="absolute bottom-0 left-0 right-0 h-1 bg-primary rounded-t-lg"\n              />\n            )}\n          </motion.button>\n        </div>\n\n        <CardContent className="p-6">\n          {error && (\n            <motion.div\n              initial={{ opacity: 0, y: -10 }}\n              animate={{ opacity: 1, y: 0 }}\n              className="bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-200 p-3 rounded-md mb-4 text-sm flex items-center"\n            >\n              <svg className="h-5 w-5 mr-2" fill="currentColor" viewBox="0 0 20 20">\n                <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clipRule="evenodd" />\n              </svg>\n              {error}\n            </motion.div>\n          )}\n          {successMessage && (\n            <motion.div\n              initial={{ opacity: 0, y: -10 }}\n              animate={{ opacity: 1, y: 0 }}\n              className="bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-200 p-3 rounded-md mb-4 text-sm flex items-center"\n            >\n              <svg className="h-5 w-5 mr-2" fill="currentColor" viewBox="0 0 20 20">\n                <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />\n              </svg>\n              {successMessage}\n            </motion.div>\n          )}\n\n          <AnimatePresence mode="wait">\n            {activeTab === 'signIn' ? (\n              <motion.form\n                key="signInForm"\n                onSubmit={handleAuth}\n                initial="hidden"\n                animate="visible"\n                exit="exit"\n                variants={formVariants}\n                className="space-y-5"\n              >\n                <div className="space-y-2">\n                  <Label htmlFor="email-signin" className="flex items-center gap-2 text-gray-700 dark:text-gray-300">\n                    <Mail className="h-4 w-4" /> Email\n                  </Label>\n                  <Input\n                    id="email-signin"\n                    type="email"\n                    placeholder="name@example.com"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                    required\n                    className="py-2 px-3 pl-10 block w-full rounded-md border-gray-300 focus:border-primary focus:ring-primary dark:bg-gray-700 dark:border-gray-600 dark:text-white"\n                  />\n                </div>\n                <div className="space-y-2">\n                  <Label htmlFor="password-signin" className="flex items-center gap-2 text-gray-700 dark:text-gray-300">\n                    <Lock className="h-4 w-4" /> Password\n                  </Label>\n                  <Input\n                    id="password-signin"\n                    type="password"\n                    placeholder="••••••••"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    required\n                    className="py-2 px-3 pl-10 block w-full rounded-md border-gray-300 focus:border-primary focus:ring-primary dark:bg-gray-700 dark:border-gray-600 dark:text-white"\n                  />\n                </div>\n                <Button type="submit" className="w-full text-lg py-3 rounded-md font-semibold" disabled={isLoading}>\n                  {isLoading ? (\n                    <span className="flex items-center justify-center">\n                      <svg className="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">\n                        <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>\n                        <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>\n                      </svg>\n                      Signing In...\n                    </span>\n                  ) : (\n                    <>\n                      <LogIn className="h-5 w-5 mr-2" /> Sign In\n                    </>\n                  )}\n                </Button>\n              </motion.form>\n            ) : (\n              <motion.form\n                key="signUpForm"\n                onSubmit={handleAuth}\n                initial="hidden"\n                animate="visible"\n                exit="exit"\n                variants={formVariants}\n                className="space-y-5"\n              >\n                <div className="space-y-2">\n                  <Label htmlFor="email-signup" className="flex items-center gap-2 text-gray-700 dark:text-gray-300">\n                    <Mail className="h-4 w-4" /> Email\n                  </Label>\n                  <Input\n                    id="email-signup"\n                    type="email"\n                    placeholder="name@example.com"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                    required\n                    className="py-2 px-3 pl-10 block w-full rounded-md border-gray-300 focus:border-primary focus:ring-primary dark:bg-gray-700 dark:border-gray-600 dark:text-white"\n                  />\n                </div>\n                <div className="space-y-2">\n                  <Label htmlFor="password-signup" className="flex items-center gap-2 text-gray-700 dark:text-gray-300">\n                    <Lock className="h-4 w-4" /> Password\n                  </Label>\n                  <Input\n                    id="password-signup"\n                    type="password"\n                    placeholder="••••••••"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    required\n                    className="py-2 px-3 pl-10 block w-full rounded-md border-gray-300 focus:border-primary focus:ring-primary dark:bg-gray-700 dark:border-gray-600 dark:text-white"\n                  />\n                </div>\n                <div className="space-y-2">\n                  <Label htmlFor="confirm-password-signup" className="flex items-center gap-2 text-gray-700 dark:text-gray-300">\n                    <Lock className="h-4 w-4" /> Confirm Password\n                  </Label>\n                  <Input\n                    id="confirm-password-signup"\n                    type="password"\n                    placeholder="••••••••"\n                    value={confirmPassword}\n                    onChange={(e) => setConfirmPassword(e.target.value)}\n                    required\n                    className="py-2 px-3 pl-10 block w-full rounded-md border-gray-300 focus:border-primary focus:ring-primary dark:bg-gray-700 dark:border-gray-600 dark:text-white"\n                  />\n                </div>\n                <Button type="submit" className="w-full text-lg py-3 rounded-md font-semibold" disabled={isLoading}>\n                  {isLoading ? (\n                    <span className="flex items-center justify-center">\n                      <svg className="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">\n                        <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>\n                        <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>\n                      </svg>\n                      Signing Up...\n                    </span>\n                  ) : (\n                    <>\n                      <UserPlus className="h-5 w-5 mr-2" /> Sign Up\n                    </>\n                  )}\n                </Button>\n              </motion.form>\n            )}\n          </AnimatePresence>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nexport default AuthPage;"